<html>

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <!-- PLEASE NO CHANGES BELOW THIS LINE (UNTIL I SAY SO) -->
    <script language="javascript" type="text/javascript" src="libraries/p5.min.js"></script>
    <script language="javascript" type="text/javascript" src="test_compresorjsgdrive.js"></script>
    <!-- OK, YOU CAN MAKE CHANGES BELOW THIS LINE AGAIN -->
    <script language="javascript" type="text/javascript" src="libraries/compressor.js"></script>
    <!-- This line removes any default padding and style.You might only need one of these values set. -->
    <style>
        body {
            padding: 0;
            margin: 0;
        }
    </style>
</head>

<body>

    <form id="uploadForm" target="_self" method="POST" action="https://script.google.com/macros/s/AKfycbw0OlryhpK5OkkM4eoM7NvlJxnkQKOinaqqgujUu7LwaeyEX_E/exec">
        <input type="text" name="fileContent" id="fileContent">
        <input type="text" name="fileName" id="fileName">
        <input type="text" name="nombre" id="nombre">

    </form>

    <input type="file" name="subir" id="subir">
    <input type="button" value="Subir" onclick="uploadFile();">
    <script>
        function uploadFile() {
            var file = document.getElementById('subir').files[0];

            new Compressor(file, {
                quality: 0.6,
                success(result) {
                    var reader = new FileReader();
                    reader.onload = function() {
                        document.getElementById('fileContent').value = reader.result;
                        document.getElementById('nombre').value = "perro";
                        document.getElementById('uploadForm').submit();
                    }
                    reader.readAsDataURL(result);
                    window.open = nada();
                },
                error(err) {
                    console.log(err.message);
                },
            });


        }

        function nada() {
            alert("Hola");
        }
    </script>
</body>

</html>